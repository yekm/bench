<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Bench : Algorithms benchmarking &quot;framework&quot;">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css">

    <title>Bench</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/yekm/bench">View on GitHub</a>

          <h1 id="project_title">Bench</h1>
          <h2 id="project_tagline">Algorithms benchmarking &quot;framework&quot;</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/yekm/bench/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/yekm/bench/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<h3>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h3>

<p>Simple benchmarking program with fancy graphs. It measures the time which was
taken to process some (varying) amount of data by the algorithm. Then it just
plots the relationship between time and amount of processed data.</p>

<p>This project is written for (self)educational purposes and fun. Some things
may look a bit awkward.</p>

<h3>
<a id="sample-graphs" class="anchor" href="#sample-graphs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sample graphs</h3>

<p>Internally <em>amount of data</em> is just a number (lets say N). We can make it behave bit differently.
For example we can keep size of data same,
but vary some properties of that data according to N:
<div class="chartdiv" width="640" data-tsvsrc="/"></div>
This plot shows relationship between "randomness" of data and time taken to sort that data.
So on X axis we have the (rough) number of random shuffles in pre-sorted array of 1 000 000 integers.
</p>

<ul>
<li>When array is almost sorted <em>Insertion sort</em> is the fastest. It becames slower than <em>Timsort</em> with 16 shuffles in array.</li>
<li>With 128 shuffles <em>Timsort</em> becomes slower than <em>Introsort</em> (default std::sort in stl), and then quickly becomes 1.5 times slower than <em>Introsort</em>.</li>
<li>
<em>Merge sort</em> behaves quite independently on randomnes. Only when array is almost completely random it becomes ~3 times slower. And only ~2 times slower than <em>Introsort</em>.</li>
<li>Sorting with the GPU (CUDA thrust library) is independent on array randomness. It is always blazing fast.</li>
</ul>

<p>You can look at other graphs based on data from
<a href="h0me.html">my coputer</a> (i5-4430, Tesla GT215) or from
<a href="g2.2xlarge.html">aws g2.2xlarge</a> instance (Xeon E5-2670, Kepler GK104) or
<a href="c3.8xlarge.html">aws c3.8xlarge</a> instance (Xeon E5-2680, 32 vCPU).
</p>
<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<h4>
<a id="compilation" class="anchor" href="#compilation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compilation:</h4>

<pre><code>git submodule update --init
mkdir build
cd build
cmake ..
make
</code></pre>

<h4>
<a id="running" class="anchor" href="#running" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running:</h4>

<p>Make separate folder and run bench from where
<code>mkdir tmp &amp;&amp; cd tmp</code></p>

<p>Listing all tasks and algorithms</p>

<pre><code>$ ../bench -l
Task 0: popcnt perfomance
  32bit SWAR popcnt
  Brian Kernighan popcnt
  Simple popcnt
  generalized 32 bit SWAR popcnt
  generalized 64 bit SWAR popcnt
  intrinsics _mm_popcnt_u64 manual asm popcnt
  intrinsics _mm_popcnt_u64 popcnt
  intrinsics _mm_popcnt_u64 unrolled popcnt
  table lookup popcnt
  thrust popcnt
Task 1: sorting algorithms
  Insertion sort n^2
  Introsort std::sort n*log(n)
  Merge sort n*log(n)
  Selection sort n^2
  Shell sort n*log^2(n)
  swenson binary insertion sort n^2
  swenson grail sort
  swenson heapsort n*log(n)
  swenson mergesort n*log(n)
  swenson quiksort n*log(n)
  swenson selection sort n^2
  swenson sell sort n*log^2(n)
  swenson sqrt sort
  swenson timsort n*log(n)
  thrust::sort
Task 2: Sorting algorithms, partially sorted data, 1000000 elements
  Insertion sort n^2
  Introsort std::sort n*log(n)
  Merge sort n*log(n)
  Shell sort n*log^2(n)
  swenson timsort n*log(n)
  thrust::sort
Task 3: 1000000 vector lengths
  handmade unrolling
  loop unrolling
  template unrolling
</code></pre>

<p>Quick run</p>

<pre><code>$ ../bench -t 0.1
</code></pre>

<p>Skip some tasks. However final listing will include this skipped tasks and old
measured perfomance data will be preserved between runs.</p>

<pre><code>$ ../bench -t 1 -s 2
</code></pre>

<p>Each algorithm runs <code>a</code> (by default 3) times with same data to minimize the error.
It is possible to regenerate data and run algorithm <code>a</code> times again. The number
of iterations of data regeneration specified by <code>-b</code></p>

<pre><code>$ ../bench -t 1 -s 0,2 -a 2 -b 3
</code></pre>

<h4>
<a id="viewing-results" class="anchor" href="#viewing-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing results:</h4>

<p>For now it is quiet uncomfortable. You need a web server and a couple of links.</p>

<pre><code>$ ln -s ../../html/d3/main.js main.js
$ ln -s ../../html/d3/main.css main.css
$ ln -s ../../html/d3/index.html index.html
$ python3 -m http.server 8082
$ $BROWSER http://localhost:8082
</code></pre>


<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>LICENSE</h3>

<p>MIT.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Bench maintained by <a href="https://github.com/yekm">yekm</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-57427066-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="main.js"></script>

  </body>
</html>
